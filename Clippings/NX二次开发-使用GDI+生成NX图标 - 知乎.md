# NX二次开发-使用GDI+生成NX图标 - 知乎
作者：薛剑腾 审校：叶齐天

适用版本：NX6以上

概述
--

之前的技巧中我们讨论了使用Photoshop手动制作带透明度的位图图标。显然这个过程其实生成的规则是固定的，因此我们是否能通过编写程序的手段来自动生成这种图标？本技巧主要介绍如何使用GDI+生成符号NX规范的位图图标。

详细内容
----

### GDI+

GDI+（Graphics Device Interface Plus图形设备接口加）是Windows XP和Windows Server 2003操作系统的子系统，也是.NET框架的重要组成部分，负责在屏幕和打印机上绘制图形图像和显示信息。

GDI+不但在功能上比GDI 要强大很多，而且在代码编写方面也更简单，因此会很快成为Windows图形图像程序开发的首选。若需在.NET中使用GDI+，只需要引用System.Drawing程序集即可。

在本例中GDI+用于读取输入的图片，对背景进行相应的处理并最终输出32位的Bmp位图文件。

### 步骤

即使使用了透明通道，图标也需要设定一个背景颜色。因为NX菜单栏的背景颜色为白色，为了图标的预览的效果更接近实际的效果，我们将背景设置为白色。

使用GDI+生成NX图标的步骤为：1，读取输入的图标，并获取图片像素大小；2，创建一张相同大小的位图，背景色为白色；3，将输入图片叠加到背景位图上；4，将新位图的透明度逐像素设置为和输入图片相同；5，输出新位图。

代码如下：

![](https://pic3.zhimg.com/v2-cb57d7d230155abec201d841e984d1aa_b.jpg)

![](https://pic2.zhimg.com/v2-567e720888f31e836a6f6a3ec3183ee5_b.jpg)

图 1

效果如下

![](https://pic1.zhimg.com/v2-6aed1f6e22d13e9c1e4881afb8576400_b.jpg)

图 2

总结
--

对于生成带有透明度的NX位图图标，若使用GDI+进行编程，可以设计出能大批量且更准确地完成这一工作的程序，进行NX二次开发功能图标的设计将更加简单。