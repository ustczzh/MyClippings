# 特征组模板制作技巧（二） - 知乎
作者：谢买粮 审校：陈建红

适用版本：NX7.5

1.  **简介**

在NX建模二次开发过程中，经常要用到各种模板，一般有UDF、组件以及特征组，使用模板的好处是不需要程序来生成各种形状，只需要通过程序来修复模板里的关键参数，通过参数驱动来改变模型的形状；在实际应用中，当模板调入后，通常要进行位置、方向以及参数的调整，有时候会出现参数修改了，特征无故更新失败的问题，但是在模板里同样修参数又没有出现问题，本文将根据项目上遇到问题讲讲如果解决这个问题。

**二、举例说明**

本文以一个塑胶模具里斜顶头特征组进行说明，斜顶头有多种形状，通过一个参数控制形状有9种变化，每一个形状的变化有独立的表达式、草图以及特征，并分类做成特征组，通过“type”来控制形状的变化，如图1。

![](https://pic2.zhimg.com/v2-2e9c130af9e461f90ca72fe64dc48e3d_b.jpg)

图1

经过测试，在模板修改各种参数都能达要预期目的，特征组也进行了分类，也容易管理，但是在程序实际调用特征后，再修改“type”表达式变更形状，出现报错的情况，通过检查发现，草图表达式的值出现备选解的情况，导致报错，如图2。

![](https://pic3.zhimg.com/v2-2721ab3e9730f51c695d316493481a9a_b.jpg)

图2

原因分析：NX在加载特征的时候，那些抵制掉的表达式内部草图位置没有进行同步更新，又因程序调入特征组的时候，通常会改变安装位置和角度，当某些草图取消抵制后，内部重新对草图线求解，尺寸的备用解更适用于当前状态，导致出现上面的错误。

解决方法：

1.  在制作模板时，减少特征数量，多种形状的变化尽量通过少的草图来控制，如此例，每种状态用了不同的草图，这会也增加模型占的内存空间，更新特征会比较慢。
2.  保持模板时，使用模型处于最复杂的状态，程序在首次调入模板时，会加载更多的模型数据。

此案例解决后的效果如图3。

![](https://pic4.zhimg.com/v2-ee8499900843e0b29ed16907cd1dcb47_b.jpg)

图3

**三、总结**

本技巧讲解了在配合NX二次开发过程中，制件模板时的一些经验分享，希望对正在做或以后要做类似工作的人员有所帮助。